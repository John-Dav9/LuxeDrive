<div class="container-fluid">
  <div class="admin-page-header">
    <p class="header-eyebrow">Super Admin</p>
    <h1 class="header-title">
      <span class="header-icon">üìä</span>
      Tableau de bord Super Admin
    </h1>
    <p class="header-subtitle">Vue d'ensemble de la plateforme LuxeDrive.</p>
  </div>

  <!-- Statistiques -->
  <div class="row g-4 mb-4">
    <div class="col-md-3">
      <div class="card stat-card border-0 shadow-sm">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <p class="text-muted mb-1">Total Utilisateurs</p>
              <h3 class="mb-0"><%= @total_users %></h3>
            </div>
            <div class="text-primary">
              <i class="fas fa-users fa-3x"></i>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card stat-card border-0 shadow-sm">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <p class="text-muted mb-1">Propri√©taires</p>
              <h3 class="mb-0"><%= @total_admin_clients %></h3>
            </div>
            <div class="text-success">
              <i class="fas fa-user-tie fa-3x"></i>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card stat-card border-0 shadow-sm">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <p class="text-muted mb-1">Total Voitures</p>
              <h3 class="mb-0"><%= @total_cars %></h3>
            </div>
            <div class="text-info">
              <i class="fas fa-car fa-3x"></i>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card stat-card border-0 shadow-sm">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <p class="text-muted mb-1">R√©servations</p>
              <h3 class="mb-0"><%= @total_bookings %></h3>
              <small class="text-warning"><%= @pending_bookings %> en attente</small>
            </div>
            <div class="text-warning">
              <i class="fas fa-calendar-check fa-3x"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row g-4">
    <!-- Utilisateurs r√©cents -->
    <div class="col-lg-6">
      <div class="card border-0 shadow-sm admin-table-card">
        <div class="card-header bg-white">
          <h5 class="mb-0">Utilisateurs r√©cents</h5>
        </div>
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table table-hover mb-0 admin-table">
              <thead class="table-light">
                <tr>
                  <th>Nom</th>
                  <th>Email</th>
                  <th>R√¥le</th>
                  <th>Date</th>
                </tr>
              </thead>
              <tbody>
                <% @recent_users.each do |user| %>
                  <tr>
                    <td><%= link_to user.full_name, super_admin_user_path(user) %></td>
                    <td><small><%= user.email %></small></td>
                    <td>
                      <% if user.super_admin? %>
                        <span class="badge bg-danger">Super Admin</span>
                      <% elsif user.admin_client? %>
                        <span class="badge bg-success">Propri√©taire</span>
                      <% else %>
                        <span class="badge bg-info">Visiteur</span>
                      <% end %>
                    </td>
                    <td><small><%= user.created_at.strftime("%d/%m/%Y") %></small></td>
                  </tr>
                <% end %>
              </tbody>
            </table>
          </div>
        </div>
        <div class="card-footer bg-white">
          <%= link_to "Voir tous les utilisateurs ‚Üí", super_admin_users_path, class: "text-decoration-none" %>
        </div>
      </div>
    </div>

    <!-- R√©servations r√©centes -->
    <div class="col-lg-6">
      <div class="card border-0 shadow-sm admin-table-card">
        <div class="card-header bg-white">
          <h5 class="mb-0">R√©servations r√©centes</h5>
        </div>
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table table-hover mb-0 admin-table">
              <thead class="table-light">
                <tr>
                  <th>Client</th>
                  <th>Voiture</th>
                  <th>Dates</th>
                  <th>Statut</th>
                </tr>
              </thead>
              <tbody>
                <% @recent_bookings.each do |booking| %>
                  <tr>
                    <td><small><%= booking.user.full_name %></small></td>
                    <td><small><%= booking.car.brand %> <%= booking.car.model %></small></td>
                    <td><small><%= booking.checkin_date.strftime("%d/%m") %> - <%= booking.checkout_date.strftime("%d/%m") %></small></td>
                    <td>
                      <% case booking.status %>
                      <% when 'pending_payment' %>
                        <span class="badge bg-secondary">Paiement en attente</span>
                      <% when 'pending' %>
                        <span class="badge bg-warning">En attente</span>
                      <% when 'accepted' %>
                        <span class="badge bg-success">Accept√©e</span>
                      <% when 'rejected' %>
                        <span class="badge bg-danger">Refus√©e</span>
                      <% when 'cancelled' %>
                        <span class="badge bg-secondary">Annul√©e</span>
                      <% when 'expired' %>
                        <span class="badge bg-dark">Expir√©e</span>
                      <% end %>
                    </td>
                  </tr>
                <% end %>
              </tbody>
            </table>
          </div>
        </div>
        <div class="card-footer bg-white">
          <%= link_to "Voir toutes les r√©servations ‚Üí", super_admin_bookings_path, class: "text-decoration-none" %>
        </div>
      </div>
    </div>
  </div>
</div>
