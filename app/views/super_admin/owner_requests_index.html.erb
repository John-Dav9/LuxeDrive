<div class="owner-requests-admin">
<h1 class="mb-4">Dossiers prestataires</h1>

<div class="card mb-4">
  <div class="card-body">
    <%= form_with url: super_admin_owner_requests_path, method: :get, local: true, class: "row g-2" do |f| %>
      <div class="col-md-4">
        <%= f.text_field :query, value: params[:query], class: "form-control", placeholder: "Rechercher par nom ou email" %>
      </div>
      <div class="col-md-3">
        <%= f.select :status, OwnerRequest.statuses.keys.map { |s| [s.humanize, s] }, { include_blank: "Tous les statuts", selected: params[:status] }, class: "form-select" %>
      </div>
      <div class="col-md-2">
        <%= f.submit "Filtrer", class: "btn btn-primary w-100" %>
      </div>
    <% end %>
  </div>
</div>
</div>

<div class="card">
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>Utilisateur</th>
            <th>Email</th>
            <th>Statut</th>
            <th>Soumis</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <% @owner_requests.each do |request| %>
            <tr>
              <td><%= request.user.full_name %></td>
              <td><%= request.user.email %></td>
              <td><span class="badge bg-secondary"><%= request.status.humanize %></span></td>
              <td><%= l(request.submitted_at || request.created_at, format: :short) %></td>
              <td><%= link_to "Voir", super_admin_owner_request_path(request), class: "btn btn-sm btn-outline-primary" %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
    <%= paginate @owner_requests %>
  </div>
</div>
