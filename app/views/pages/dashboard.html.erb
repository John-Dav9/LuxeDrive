<div class="container">
  <div class="dashboard-bookings">
    <div class="dashboard-header">
      <h1>Mes reservations</h1>
      <p>Retrouvez l'historique et le statut de vos reservations.</p>
    </div>

    <% if @my_bookings.any? %>
      <div class="booking-list">
        <% @my_bookings.each do |booking| %>
          <% next unless booking.user == current_user %>
          <div class="booking-card">
            <div class="booking-media">
              <% if booking.car.photos.attached? %>
                <%= image_tag booking.car.photos.first, class: "booking-image" %>
              <% else %>
                <div class="booking-placeholder">
                  <i class="fas fa-car"></i>
                </div>
              <% end %>
              <span class="booking-status badge-<%= booking.status %>">
                <%= booking.status %>
              </span>
            </div>
            <div class="booking-body">
              <div class="booking-title">
                <h2><%= booking.car.brand %> <span><%= booking.car.model %></span></h2>
                <div class="booking-price"><%= number_with_precision(booking.total_price, precision: 0) %> â‚¬</div>
              </div>
              <div class="booking-meta">
                <span><i class="fas fa-user"></i> <%= booking.user.full_name %></span>
                <span><i class="fas fa-calendar"></i> <%= l(booking.checkin_date, format: :short) %> - <%= l(booking.checkout_date, format: :short) %></span>
                <span><i class="fas fa-map-marker-alt"></i> <%= booking.car.address %></span>
              </div>
              <% if booking.status == "pending_payment" %>
                <div class="mt-2">
                  <%= link_to "Payer maintenant", payment_booking_path(booking), class: "btn btn-primary btn-sm" %>
                </div>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <div class="empty-state">
        <i class="fas fa-calendar-times"></i>
        <h2>Aucune reservation</h2>
        <p>Vous n'avez pas encore effectue de reservation.</p>
      </div>
    <% end %>
  </div>
</div>
