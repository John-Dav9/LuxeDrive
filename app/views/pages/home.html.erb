<div class="home-hero">
  <div class="hero-overlay">
    <div class="container">
      <div class="hero-content text-center">
        <h1 class="display-3 fw-bold text-white mb-4">Louez la voiture de vos rêves</h1>
        <p class="lead text-white mb-5">Des voitures de luxe et de prestige pour tous vos déplacements</p>
        
        <%= form_with url: cars_path, method: :get, class: "search-form-home" do |f| %>
          <div class="row g-3 justify-content-center">
            <div class="col-md-5">
              <%= f.text_field :query, 
                  placeholder: "Rechercher une marque, modèle ou ville...", 
                  class: "form-control form-control-lg" %>
            </div>
            <div class="col-md-3">
              <%= f.select :category, 
                  options_for_select([["Toutes catégories", ""]] + @categories.map { |c| [c, c] }), 
                  {}, 
                  class: "form-select form-select-lg" %>
            </div>
            <div class="col-md-2">
              <%= f.submit "Rechercher", class: "btn btn-primary btn-lg w-100" %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>

<div class="container my-5">
  <!-- Section Catégories -->
  <section class="categories-section mb-5">
    <h2 class="text-center mb-4">Parcourir par catégorie</h2>
    <div class="row g-3">
      <% @categories.each do |category| %>
        <div class="col-md-3 col-sm-6">
          <%= link_to cars_path(category: category), class: "category-card text-decoration-none" do %>
            <div class="card h-100 text-center hover-lift">
              <div class="card-body">
                <i class="fas fa-car fa-3x mb-3 text-primary"></i>
                <h5 class="card-title"><%= category %></h5>
              </div>
            </div>
          <% end %>
        </div>
      <% end %>
    </div>
  </section>

  <!-- Section Voitures en vedette -->
  <section class="featured-cars-section">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2>Voitures en vedette</h2>
      <%= link_to "Voir toutes les voitures", cars_path, class: "btn btn-outline-primary" %>
    </div>

    <% if @featured_cars.any? %>
      <div class="row g-4">
        <% @featured_cars.each do |car| %>
          <div class="col-md-4">
            <div class="card car-card h-100 shadow-sm">
              <div class="car-image-wrapper">
                <% if car.photos.attached? %>
                  <%= link_to car_path(car) do %>
                    <%= image_tag car.photos.first, class: "card-img-top car-image", alt: "#{car.brand} #{car.model}" %>
                  <% end %>
                <% else %>
                  <%= link_to car_path(car) do %>
                    <div class="placeholder-image d-flex align-items-center justify-content-center">
                      <i class="fas fa-car fa-5x text-muted"></i>
                    </div>
                  <% end %>
                <% end %>
                <% if car.status %>
                  <span class="badge bg-success position-absolute top-0 end-0 m-2">Disponible</span>
                <% else %>
                  <span class="badge bg-secondary position-absolute top-0 end-0 m-2">Non disponible</span>
                <% end %>
              </div>
              <div class="card-body">
                <span class="badge bg-primary mb-2"><%= car.category %></span>
                <h5 class="card-title">
                  <%= link_to "#{car.brand} #{car.model}", car_path(car), class: "text-decoration-none text-dark" %>
                </h5>
                <p class="card-text text-muted mb-2">
                  <i class="fas fa-calendar-alt me-1"></i><%= car.year %>
                </p>
                <p class="card-text text-muted mb-3">
                  <i class="fas fa-map-marker-alt me-1"></i><%= car.address.truncate(40) %>
                </p>
                <div class="d-flex justify-content-between align-items-center">
                  <h4 class="text-primary mb-0"><%= number_to_currency(car.price, unit: "€", format: "%n %u") %>/jour</h4>
                  <%= link_to "Réserver", car_path(car), class: "btn btn-primary btn-sm" %>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <div class="alert alert-info text-center">
        <i class="fas fa-info-circle me-2"></i>
        Aucune voiture disponible pour le moment.
      </div>
    <% end %>
  </section>

  <!-- Section Avantages -->
  <section class="benefits-section my-5 py-5 bg-light rounded">
    <div class="container">
      <h2 class="text-center mb-5">Pourquoi choisir LuxeDrive ?</h2>
      <div class="row g-4">
        <div class="col-md-4 text-center">
          <div class="benefit-icon mb-3">
            <i class="fas fa-shield-alt fa-4x text-primary"></i>
          </div>
          <h4>Sécurisé et Fiable</h4>
          <p class="text-muted">Tous nos véhicules sont assurés et régulièrement entretenus pour garantir votre sécurité. Chaque location inclut une assurance complète.</p>
        </div>
        <div class="col-md-4 text-center">
          <div class="benefit-icon mb-3">
            <i class="fas fa-star fa-4x text-primary"></i>
          </div>
          <h4>Voitures Premium</h4>
          <p class="text-muted">Une sélection de véhicules haut de gamme et prestigieux pour tous vos besoins : affaires, loisirs ou événements spéciaux.</p>
        </div>
        <div class="col-md-4 text-center">
          <div class="benefit-icon mb-3">
            <i class="fas fa-clock fa-4x text-primary"></i>
          </div>
          <h4>Réservation Instantanée</h4>
          <p class="text-muted">Réservez en quelques clics via notre plateforme sécurisée et récupérez votre véhicule rapidement selon vos horaires.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Section Témoignages -->
  <section class="testimonials-section my-5">
    <div class="container">
      <h2 class="text-center mb-5">Ce que nos clients disent</h2>
      <div class="row g-4">
        <div class="col-md-4">
          <div class="card h-100">
            <div class="card-body">
              <div class="mb-3">
                <i class="fas fa-star text-warning"></i>
                <i class="fas fa-star text-warning"></i>
                <i class="fas fa-star text-warning"></i>
                <i class="fas fa-star text-warning"></i>
                <i class="fas fa-star text-warning"></i>
              </div>
              <p class="card-text mb-3">"Excellente expérience ! Le véhicule était impeccable et le service très professionnel. Je recommande vivement !"</p>
              <p class="text-muted mb-0"><strong>Marie Dubois</strong></p>
              <p class="text-muted small">Paris, France</p>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card h-100">
            <div class="card-body">
              <div class="mb-3">
                <i class="fas fa-star text-warning"></i>
                <i class="fas fa-star text-warning"></i>
                <i class="fas fa-star text-warning"></i>
                <i class="fas fa-star text-warning"></i>
                <i class="fas fa-star text-warning"></i>
              </div>
              <p class="card-text mb-3">"Processus de réservation simple et rapide. Le véhicule correspondait exactement à la description. Merci !"</p>
              <p class="text-muted mb-0"><strong>Jean Martin</strong></p>
              <p class="text-muted small">Lyon, France</p>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card h-100">
            <div class="card-body">
              <div class="mb-3">
                <i class="fas fa-star text-warning"></i>
                <i class="fas fa-star text-warning"></i>
                <i class="fas fa-star text-warning"></i>
                <i class="fas fa-star text-warning"></i>
                <i class="fas fa-star text-warning"></i>
              </div>
              <p class="card-text mb-3">"Service client excellent ! Équipe à l'écoute et disponible. Je réserverai à nouveau sans hésiter."</p>
              <p class="text-muted mb-0"><strong>Sophie Laurent</strong></p>
              <p class="text-muted small">Nice, France</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Section CTA -->
  <section class="cta-section my-5 py-5 bg-primary text-white rounded text-center">
    <div class="container">
      <h2 class="mb-4">Prêt à louer une voiture de luxe ?</h2>
      <p class="lead mb-4">Découvrez notre sélection de véhicules premium et réservez en quelques minutes</p>
      <%= link_to "Parcourir les voitures", cars_path, class: "btn btn-light btn-lg" %>
    </div>
  </section>
</div>
